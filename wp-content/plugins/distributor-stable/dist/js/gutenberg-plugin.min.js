(()=>{"use strict";const i=window.wp.primitives,t=window.ReactJSXRuntime,s=(0,t.jsxs)(i.SVG,{width:"20",height:"20",viewBox:"13.4 8.8 573.2 573.2",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)(i.Path,{d:"M195.113 411.033c45.835 46.692 119.124 58.488 178.387 24.273 70.262-40.566 94.371-130.544 53.806-200.806-40.566-70.262-130.544-94.371-200.806-53.806-19.873 11.474-36.055 26.899-48.124 44.715l64.722 33.186c22.201-25.593 59.796-33.782 91.279-17.639 37.002 18.973 51.64 64.418 32.667 101.421-18.973 37.002-64.418 51.64-101.421 32.667-31.483-16.143-46.776-51.45-38.951-84.415l-81.702-41.892c-8.838-4.532-12.335-15.367-7.814-24.211 15.514-30.346 39.658-56.715 71.344-75.009 87.469-50.5 199.482-20.486 249.983 66.983 50.5 87.469 20.486 199.482-66.983 249.983-75.235 43.437-168.63 27.307-225.419-33.717-17.809 3.778-36.797-4.055-46.387-20.666-11.922-20.648-4.837-47.091 15.812-59.012 20.648-11.922 47.091-4.836 59.012 15.812 7.77 13.458 7.466 29.377.595 42.133Z"}),(0,t.jsx)(i.Path,{d:"M262.237 72.985C148.8 91.101 62 189.494 62 308c0 131.356 106.644 238 238 238s238-106.644 238-238c0-34.059-7.168-66.458-20.08-95.766-15.121.99-30.323-6.014-39.137-19.626-12.959-20.014-7.231-46.783 12.783-59.742 20.014-12.958 46.783-7.231 59.742 12.783 10.095 15.592 8.849 35.284-1.657 49.352C565.288 229.461 574 267.721 574 308c0 151.225-122.775 274-274 274S26 459.225 26 308C26 170.539 127.443 56.584 259.487 36.98 265.594 20.533 281.438 8.8 300 8.8c23.843 0 43.2 19.357 43.2 43.2 0 23.843-19.357 43.2-43.2 43.2-16.229 0-30.38-8.968-37.763-22.215Z"})]}),n=window.wp.components,e=window.wp.data,r=window.wp.editPost,o=window.wp.i18n,d=window.wp.plugins,a=window.wp.element,{document:l,dt:c,dtGutenberg:u,MouseEvent:p}=window,h=()=>{const i=l.body.classList;if(0!==parseInt(u.syndicationTime))return null;const s=l.querySelector("#wp-admin-bar-distributor"),n=l.querySelector("#wp-admin-bar-distributor > a");if(!s||!n)return(0,t.jsx)("div",{className:"distributor-toggle",children:(0,t.jsx)("span",{children:(0,o.__)("Refresh page to see distribution options","distributor")})});const r=(0,e.select)("core/edit-post").isFeatureActive("fullscreenMode");return(0,t.jsx)("div",{className:"distributor-toggle",children:(0,t.jsx)("button",{className:"components-button is-secondary",type:"button",onClick:()=>{const t=new p("mouseenter");r?i.add("is-showing-distributor"):i.remove("is-showing-distributor"),s.classList.toggle("hover"),n.dispatchEvent(t)},children:(0,o.sprintf)((0,o.__)("Distribute %1$s","distributor"),u.postTypeSingular.toLowerCase()||(0,o._x)("content","generic term for post content","distributor"))})})},b=()=>0!==parseInt(u.syndicationTime)?null:(0,t.jsx)("p",{children:(0,o.__)("Distribution options available once published","distributor")}),m=()=>0<parseInt(u.syndicationCount)?(0,t.jsx)(x,{}):0!==parseInt(u.syndicationTime)?(0,t.jsx)(j,{}):null,x=()=>(0,t.jsx)("span",{id:"distributed-to",children:(0,o.sprintf)((0,o._n)("Distributed to %1$s connection.","Distributed to %1$s connections.",1*u.syndicationCount,"distributor"),u.syndicationCount)}),j=()=>{const[i,e]=(0,a.useState)(!1),r=()=>e(!0),d=()=>e(!1);return parseInt(u.unlinked)?(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{id:"distributed-from",children:(0,o.sprintf)((0,o.__)("Pulled on %1$s from %2$s","distributor"),u.syndicationTime,u.originalLocationName)}),(0,t.jsxs)("span",{id:"distributed-data",children:[(0,o.__)("This post has been unlinked from the","distributor")," ",(0,t.jsx)("a",{href:u.postUrl,children:(0,o.__)("Original Content","distributor")}),"."]}),(0,t.jsxs)("span",{id:"distributed-restorelink",onClick:r,children:[" ",(0,t.jsx)("span",{className:"dashicons dashicons-admin-links"}),(0,t.jsxs)("a",{href:"javascript:void(0);",children:[" ",(0,o.__)("Restore link to Original","distributor")]})]}),i&&(0,t.jsxs)(n.Modal,{title:"Restore link to Original",icon:s,size:50,onRequestClose:d,className:"distributed-modal-popup",overlayClassName:"distributed-modal-overlay",children:[(0,t.jsxs)("span",{id:"distributed-data",children:[(0,o.__)("Restoring the link to the","distributor")," ",(0,t.jsx)("a",{href:u.postUrl,children:(0,o.__)("Original Content","distributor")})," ",(0,o.__)("will start updating this post automatically from the Original, overwriting current content.","distributor")]}),(0,t.jsxs)("div",{className:"actions",children:[(0,t.jsxs)("a",{href:u.linkNonceUrl,className:"button",children:[(0,t.jsx)("span",{className:"dashicons dashicons-admin-links"}),(0,o.__)("Restore link","distributor")]}),(0,t.jsxs)("span",{id:"close",onClick:d,"aria-label":"Cancel",children:[" ",(0,t.jsxs)("a",{href:"javascript:void(0);",children:[" ",(0,o.__)("Cancel","distributor")]})]})]})]})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{id:"distributed-from",children:(0,o.sprintf)((0,o.__)("Pulled & linked on %1$s from %2$s","distributor"),u.syndicationTime,u.originalLocationName)}),(0,t.jsxs)("span",{id:"distributed-data",children:[(0,o.__)("Updating the","distributor")," ",(0,t.jsx)("a",{href:u.postUrl,children:(0,o.__)("Original Content","distributor")}),", ",(0,o.__)("will update this post automatically.","distributor")]}),(0,t.jsxs)("span",{id:"distributed-unlink",onClick:r,children:[" ",(0,t.jsxs)("a",{href:"javascript:void(0);",children:[" ",(0,t.jsx)("span",{className:"dashicons dashicons-editor-unlink"}),(0,o.__)("Unlink from Original","distributor")]})]}),i&&(0,t.jsxs)(n.Modal,{title:"Unlink from Original",icon:s,size:50,onRequestClose:d,className:"distributed-modal-popup",overlayClassName:"distributed-modal-overlay",children:[(0,t.jsx)("p",{dangerouslySetInnerHTML:{__html:(0,o.sprintf)((0,o.__)("Unlinking from the %1$sOriginal Content%2$s will stop updating this post automatically.","distributor"),'<a href="'+u.postUrl+'">',"</a>")}}),(0,t.jsxs)(n.Flex,{justify:"flex-start",className:"actions",children:[(0,t.jsx)(n.Button,{icon:(0,t.jsx)(n.Icon,{icon:"editor-unlink"}),variant:"secondary",href:u.unlinkNonceUrl,children:(0,o.__)("Unlink","distributor")}),(0,t.jsx)(n.Button,{variant:"link",onClick:d,children:(0,o.__)("Cancel","distributor")})]})]})]})},_=()=>(0,t.jsx)(n.Icon,{className:"components-panel__icon",icon:s,size:20}),g=0!==parseInt(u.unlinked),w=()=>g?(0,o.__)("Unlinked Content","distributor"):(0,o.__)("Pulled Content","distributor");(0,d.registerPlugin)("distributor-plugin",{render:()=>{const i=(0,e.useSelect)((i=>i("core/editor").getCurrentPostType())),s=(0,e.useSelect)((i=>i("core/editor").getCurrentPostAttribute("status"))),n=l.querySelector("#wp-admin-bar-distributor"),o=(0,e.useSelect)((i=>i("core/editor").getCurrentPost()));return u.noPermissions&&1===parseInt(u.noPermissions)||u.supportedPostTypes&&void 0===u.supportedPostTypes[i]?null:(c.postTitle=o.title,c.postStatus=o.status,u.supportedPostStati&&!u.supportedPostStati.includes(s)?(n?.classList.add("hide"),(0,t.jsxs)(r.PluginDocumentSettingPanel,{title:(0,t.jsx)(w,{}),icon:_,className:"distributor-panel",children:[(0,t.jsx)(b,{}),(0,t.jsx)(m,{})]})):(n?.classList.remove("hide"),(0,t.jsxs)(r.PluginDocumentSettingPanel,{title:(0,t.jsx)(w,{}),icon:_,className:"distributor-panel",children:[(0,t.jsx)(h,{}),(0,t.jsx)(m,{})]})))}})})();